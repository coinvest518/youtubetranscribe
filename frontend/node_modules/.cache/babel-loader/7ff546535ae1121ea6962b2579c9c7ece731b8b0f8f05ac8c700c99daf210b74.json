{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mildh\\\\youtube-audio-extractor\\\\frontend\\\\src\\\\components\\\\DownloadForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DownloadForm = () => {\n  _s();\n  const [youtubeUrl, setYoutubeUrl] = useState('');\n  const [message, setMessage] = useState('');\n  const [transcription, setTranscription] = useState('');\n  const handleDownload = async e => {\n    e.preventDefault();\n    setMessage('');\n    setTranscription('');\n    try {\n      // Step 1: Download the audio\n      const downloadResponse = await axios.post('http://localhost:5000/download', {\n        youtube_url: youtubeUrl\n      });\n      setMessage(downloadResponse.data.message);\n      const fileName = downloadResponse.data.file;\n\n      // Step 2: Start transcription\n      const transcribeResponse = await axios.post('http://localhost:5000/transcribe', {\n        file_name: fileName\n      });\n      const id = transcribeResponse.data.transcript_id; // Use a local variable instead\n      setMessage('Transcription in progress...');\n\n      // Step 3: Poll for transcription result\n      pollTranscriptionResult(id); // Pass the local variable to the polling function\n    } catch (error) {\n      setMessage(`Error: ${error.response ? error.response.data.error : error.message}`);\n    }\n  };\n  const pollTranscriptionResult = async id => {\n    const interval = setInterval(async () => {\n      try {\n        const resultResponse = await axios.get(`http://localhost:5000/transcription_result/${id}`);\n        if (resultResponse.data.status === 'completed') {\n          clearInterval(interval);\n          setTranscription(resultResponse.data.text);\n          setMessage('Transcription completed successfully.');\n        } else if (resultResponse.data.status === 'failed') {\n          clearInterval(interval);\n          setMessage('Transcription failed.');\n        }\n      } catch (error) {\n        clearInterval(interval);\n        setMessage('Error fetching transcription result.');\n      }\n    }, 5000); // Poll every 5 seconds\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleDownload,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: youtubeUrl,\n        onChange: e => setYoutubeUrl(e.target.value),\n        placeholder: \"Enter YouTube URL\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Download and Transcribe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }, this), transcription && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Transcription:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: transcription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(DownloadForm, \"8zWXpbQKfGarD67Uv35gM35bJbw=\");\n_c = DownloadForm;\nexport default DownloadForm;\nvar _c;\n$RefreshReg$(_c, \"DownloadForm\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","DownloadForm","_s","youtubeUrl","setYoutubeUrl","message","setMessage","transcription","setTranscription","handleDownload","e","preventDefault","downloadResponse","post","youtube_url","data","fileName","file","transcribeResponse","file_name","id","transcript_id","pollTranscriptionResult","error","response","interval","setInterval","resultResponse","get","status","clearInterval","text","children","onSubmit","type","value","onChange","target","placeholder","required","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/mildh/youtube-audio-extractor/frontend/src/components/DownloadForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst DownloadForm = () => {\r\n    const [youtubeUrl, setYoutubeUrl] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [transcription, setTranscription] = useState('');\r\n\r\n    const handleDownload = async (e) => {\r\n        e.preventDefault();\r\n        setMessage('');\r\n        setTranscription('');\r\n\r\n        try {\r\n            // Step 1: Download the audio\r\n            const downloadResponse = await axios.post('http://localhost:5000/download', { youtube_url: youtubeUrl });\r\n            setMessage(downloadResponse.data.message);\r\n            const fileName = downloadResponse.data.file;\r\n\r\n            // Step 2: Start transcription\r\n            const transcribeResponse = await axios.post('http://localhost:5000/transcribe', { file_name: fileName });\r\n            const id = transcribeResponse.data.transcript_id; // Use a local variable instead\r\n            setMessage('Transcription in progress...');\r\n\r\n            // Step 3: Poll for transcription result\r\n            pollTranscriptionResult(id); // Pass the local variable to the polling function\r\n        } catch (error) {\r\n            setMessage(`Error: ${error.response ? error.response.data.error : error.message}`);\r\n        }\r\n    };\r\n\r\n    const pollTranscriptionResult = async (id) => {\r\n        const interval = setInterval(async () => {\r\n            try {\r\n                const resultResponse = await axios.get(`http://localhost:5000/transcription_result/${id}`);\r\n                if (resultResponse.data.status === 'completed') {\r\n                    clearInterval(interval);\r\n                    setTranscription(resultResponse.data.text);\r\n                    setMessage('Transcription completed successfully.');\r\n                } else if (resultResponse.data.status === 'failed') {\r\n                    clearInterval(interval);\r\n                    setMessage('Transcription failed.');\r\n                }\r\n            } catch (error) {\r\n                clearInterval(interval);\r\n                setMessage('Error fetching transcription result.');\r\n            }\r\n        }, 5000); // Poll every 5 seconds\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleDownload}>\r\n                <input\r\n                    type=\"text\"\r\n                    value={youtubeUrl}\r\n                    onChange={(e) => setYoutubeUrl(e.target.value)}\r\n                    placeholder=\"Enter YouTube URL\"\r\n                    required\r\n                />\r\n                <button type=\"submit\">Download and Transcribe</button>\r\n            </form>\r\n            {message && <p>{message}</p>}\r\n            {transcription && (\r\n                <div>\r\n                    <h3>Transcription:</h3>\r\n                    <p>{transcription}</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DownloadForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}